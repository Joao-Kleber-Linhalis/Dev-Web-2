<div class="container mat-elevation-z8">
    <form class="form">

        <h1 class="fullWidth">Cadastrar Locação</h1>

        <mat-form-field class="fullWidth" appearance="outline">
            <mat-label>Sócio</mat-label>
            <mat-select [(ngModel)]="locacao.cliente" name="cliente" [formControl]="cliente" required>
                <mat-option *ngFor="let cliente of clienteList" [value]="cliente">{{cliente.nome}}</mat-option>
            </mat-select>
            <mat-icon matSuffix>account_circle</mat-icon>
        </mat-form-field>
        <mat-form-field class="fullWidth" appearance="outline">
            <mat-label>Dependente</mat-label>
            <mat-select [(ngModel)]="locacao.dependente" name="dependente" >
                <!-- Adicionando a opção com valor nulo -->
                <mat-option [value]="null">{{'Nenhum Dependente'}}</mat-option>

                <!-- Iterando sobre os dependentes, mas verificando se locacao.cliente existe -->
                <ng-container *ngIf="locacao.cliente && locacao.cliente.dependentes">
                    <mat-option *ngFor="let dependente of locacao.cliente.dependentes" [value]="dependente">
                        {{ dependente.nome }}
                    </mat-option>
                </ng-container>
            </mat-select>
            <mat-hint align="start">Deixe vazio se a locação for para o Sócio</mat-hint>
            <mat-icon matSuffix>supervisor_account</mat-icon>
        </mat-form-field>
        <mat-form-field class="fullWidth" appearance="outline">
            <mat-label>ID Item</mat-label>
            <input matInput type="number" placeholder="Ex... 1" [(ngModel)]="itemId" name="itemId">
            <button matSuffix mat-icon-button (click)="pesquisarItem()">
                <mat-icon>search</mat-icon>
            </button>
        </mat-form-field>
        <mat-form-field class="fullWidth" appearance="outline">
            <mat-label>Data da Locação</mat-label>
            <input matInput [matDatepicker]="picker1" (dateInput)="onDateSelected($event, 'dtLocacao')"
                [formControl]="dtLocacao" [max]="maxDate">
            <mat-datepicker-toggle matIconSuffix [for]="picker1"></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>

        <mat-form-field class="fullWidth" appearance="outline">
            <mat-label>Data de Devolução Prevista</mat-label>
            <input matInput [matDatepicker]="picker2" (dateInput)="onDateSelected($event, 'dtDevolucaoPrevista')"
                [formControl]="dtDevolucaoPrevista" [min]="minDate">
            <mat-datepicker-toggle matIconSuffix [for]="picker2"></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
        </mat-form-field>

        <button (click)="create()" [disabled]="!validarCampos()" class="fullWidth mat-elevation-z4" mat-flat-button
            color="primary">Cadastrar</button>
        <button routerLink="../" class="fullWidth mat-elevation-z4" mat-stroked-button color="warn">Cancelar</button>
    </form>
</div>